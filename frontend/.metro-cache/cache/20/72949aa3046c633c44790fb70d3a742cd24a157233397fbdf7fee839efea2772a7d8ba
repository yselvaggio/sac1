{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (storedToken) {\n          const response = await axios.default.get(`${BACKEND_URL}/api/auth/verify?token=${storedToken}`);\n          setUser(response.data);\n          setToken(storedToken);\n        }\n      } catch (error) {\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/login`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Errore durante il login';\n        throw new Error(message);\n      }\n    };\n    const register = async (email, password, nome) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/register`, {\n          email,\n          password,\n          nome\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Errore durante la registrazione';\n        throw new Error(message);\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n        setUser(null);\n        setToken(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":119,"map":[[13,2,27,0,"exports"],[13,9,27,0],[13,10,27,0,"AuthProvider"],[13,22,27,0],[13,25,27,0,"AuthProvider"],[13,37,27,0],[14,2,111,0,"exports"],[14,9,111,0],[14,10,111,0,"useAuth"],[14,17,111,0],[14,20,111,0,"useAuth"],[14,27,111,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_axios"],[18,12,3,0],[18,15,3,0,"require"],[18,22,3,0],[18,23,3,0,"_dependencyMap"],[18,37,3,0],[19,2,3,0],[19,6,3,0,"axios"],[19,11,3,0],[19,14,3,0,"_interopDefault"],[19,29,3,0],[19,30,3,0,"_axios"],[19,36,3,0],[20,2,3,26],[20,6,3,26,"_reactJsxDevRuntime"],[20,25,3,26],[20,28,3,26,"require"],[20,35,3,26],[20,36,3,26,"_dependencyMap"],[20,50,3,26],[21,2,5,0],[21,8,5,6,"BACKEND_URL"],[21,19,5,17],[21,22,5,20,"process"],[21,29,5,27],[21,30,5,28,"env"],[21,33,5,31],[21,34,5,32,"EXPO_PUBLIC_BACKEND_URL"],[21,57,5,55],[22,2,25,0],[22,8,25,6,"AuthContext"],[22,19,25,17],[22,35,25,20],[22,39,25,20,"createContext"],[22,45,25,33],[22,46,25,33,"createContext"],[22,59,25,33],[22,61,25,63,"undefined"],[22,70,25,72],[22,71,25,73],[23,2,27,7],[23,11,27,16,"AuthProvider"],[23,23,27,28,"AuthProvider"],[23,24,27,29],[24,4,27,31,"children"],[25,2,27,65],[25,3,27,66],[25,5,27,68],[26,4,28,2],[26,10,28,8],[26,11,28,9,"user"],[26,15,28,13],[26,17,28,15,"setUser"],[26,24,28,22],[26,25,28,23],[26,28,28,26],[26,32,28,26,"useState"],[26,38,28,34],[26,39,28,34,"useState"],[26,47,28,34],[26,49,28,48],[26,53,28,52],[26,54,28,53],[27,4,29,2],[27,10,29,8],[27,11,29,9,"token"],[27,16,29,14],[27,18,29,16,"setToken"],[27,26,29,24],[27,27,29,25],[27,30,29,28],[27,34,29,28,"useState"],[27,40,29,36],[27,41,29,36,"useState"],[27,49,29,36],[27,51,29,52],[27,55,29,56],[27,56,29,57],[28,4,30,2],[28,10,30,8],[28,11,30,9,"isLoading"],[28,20,30,18],[28,22,30,20,"setIsLoading"],[28,34,30,32],[28,35,30,33],[28,38,30,36],[28,42,30,36,"useState"],[28,48,30,44],[28,49,30,44,"useState"],[28,57,30,44],[28,59,30,45],[28,63,30,49],[28,64,30,50],[29,4,32,2],[29,8,32,2,"useEffect"],[29,14,32,11],[29,15,32,11,"useEffect"],[29,24,32,11],[29,26,32,12],[29,32,32,18],[30,6,33,4,"loadStoredAuth"],[30,20,33,18],[30,21,33,19],[30,22,33,20],[31,4,34,2],[31,5,34,3],[31,7,34,5],[31,9,34,7],[31,10,34,8],[32,4,36,2],[32,10,36,8,"loadStoredAuth"],[32,24,36,22],[32,27,36,25],[32,33,36,25,"loadStoredAuth"],[32,34,36,25],[32,39,36,37],[33,6,37,4],[33,10,37,8],[34,8,38,6],[34,14,38,12,"storedToken"],[34,25,38,23],[34,28,38,26],[34,34,38,32,"AsyncStorage"],[34,46,38,44],[34,47,38,44,"default"],[34,54,38,44],[34,55,38,45,"getItem"],[34,62,38,52],[34,63,38,53],[34,70,38,60],[34,71,38,61],[35,8,39,6],[35,12,39,10,"storedToken"],[35,23,39,21],[35,25,39,23],[36,10,40,8],[36,16,40,14,"response"],[36,24,40,22],[36,27,40,25],[36,33,40,31,"axios"],[36,38,40,36],[36,39,40,36,"default"],[36,46,40,36],[36,47,40,37,"get"],[36,50,40,40],[36,51,40,41],[36,54,40,44,"BACKEND_URL"],[36,65,40,55],[36,91,40,81,"storedToken"],[36,102,40,92],[36,104,40,94],[36,105,40,95],[37,10,41,8,"setUser"],[37,17,41,15],[37,18,41,16,"response"],[37,26,41,24],[37,27,41,25,"data"],[37,31,41,29],[37,32,41,30],[38,10,42,8,"setToken"],[38,18,42,16],[38,19,42,17,"storedToken"],[38,30,42,28],[38,31,42,29],[39,8,43,6],[40,6,44,4],[40,7,44,5],[40,8,44,6],[40,15,44,13,"error"],[40,20,44,18],[40,22,44,20],[41,8,45,6],[41,14,45,12,"AsyncStorage"],[41,26,45,24],[41,27,45,24,"default"],[41,34,45,24],[41,35,45,25,"removeItem"],[41,45,45,35],[41,46,45,36],[41,53,45,43],[41,54,45,44],[42,8,46,6],[42,14,46,12,"AsyncStorage"],[42,26,46,24],[42,27,46,24,"default"],[42,34,46,24],[42,35,46,25,"removeItem"],[42,45,46,35],[42,46,46,36],[42,52,46,42],[42,53,46,43],[43,6,47,4],[43,7,47,5],[43,16,47,14],[44,8,48,6,"setIsLoading"],[44,20,48,18],[44,21,48,19],[44,26,48,24],[44,27,48,25],[45,6,49,4],[46,4,50,2],[46,5,50,3],[47,4,52,2],[47,10,52,8,"login"],[47,15,52,13],[47,18,52,16],[47,24,52,16,"login"],[47,25,52,23,"email"],[47,30,52,36],[47,32,52,38,"password"],[47,40,52,54],[47,45,52,59],[48,6,53,4],[48,10,53,8],[49,8,54,6],[49,14,54,12,"response"],[49,22,54,20],[49,25,54,23],[49,31,54,29,"axios"],[49,36,54,34],[49,37,54,34,"default"],[49,44,54,34],[49,45,54,35,"post"],[49,49,54,39],[49,50,54,40],[49,53,54,43,"BACKEND_URL"],[49,64,54,54],[49,81,54,71],[49,83,54,73],[50,10,55,8,"email"],[50,15,55,13],[51,10,56,8,"password"],[52,8,57,6],[52,9,57,7],[52,10,57,8],[53,8,59,6],[53,14,59,12],[54,10,59,14,"access_token"],[54,22,59,26],[55,10,59,28,"user"],[55,14,59,32],[55,16,59,34,"userData"],[56,8,59,43],[56,9,59,44],[56,12,59,47,"response"],[56,20,59,55],[56,21,59,56,"data"],[56,25,59,60],[57,8,61,6,"setToken"],[57,16,61,14],[57,17,61,15,"access_token"],[57,29,61,27],[57,30,61,28],[58,8,62,6,"setUser"],[58,15,62,13],[58,16,62,14,"userData"],[58,24,62,22],[58,25,62,23],[59,8,64,6],[59,14,64,12,"AsyncStorage"],[59,26,64,24],[59,27,64,24,"default"],[59,34,64,24],[59,35,64,25,"setItem"],[59,42,64,32],[59,43,64,33],[59,50,64,40],[59,52,64,42,"access_token"],[59,64,64,54],[59,65,64,55],[60,8,65,6],[60,14,65,12,"AsyncStorage"],[60,26,65,24],[60,27,65,24,"default"],[60,34,65,24],[60,35,65,25,"setItem"],[60,42,65,32],[60,43,65,33],[60,49,65,39],[60,51,65,41,"JSON"],[60,55,65,45],[60,56,65,46,"stringify"],[60,65,65,55],[60,66,65,56,"userData"],[60,74,65,64],[60,75,65,65],[60,76,65,66],[61,6,66,4],[61,7,66,5],[61,8,66,6],[61,15,66,13,"error"],[61,20,66,23],[61,22,66,25],[62,8,67,6],[62,14,67,12,"message"],[62,21,67,19],[62,24,67,22,"error"],[62,29,67,27],[62,30,67,28,"response"],[62,38,67,36],[62,40,67,38,"data"],[62,44,67,42],[62,46,67,44,"detail"],[62,52,67,50],[62,56,67,54],[62,81,67,79],[63,8,68,6],[63,14,68,12],[63,18,68,16,"Error"],[63,23,68,21],[63,24,68,22,"message"],[63,31,68,29],[63,32,68,30],[64,6,69,4],[65,4,70,2],[65,5,70,3],[66,4,72,2],[66,10,72,8,"register"],[66,18,72,16],[66,21,72,19],[66,27,72,19,"register"],[66,28,72,26,"email"],[66,33,72,39],[66,35,72,41,"password"],[66,43,72,57],[66,45,72,59,"nome"],[66,49,72,71],[66,54,72,76],[67,6,73,4],[67,10,73,8],[68,8,74,6],[68,14,74,12,"response"],[68,22,74,20],[68,25,74,23],[68,31,74,29,"axios"],[68,36,74,34],[68,37,74,34,"default"],[68,44,74,34],[68,45,74,35,"post"],[68,49,74,39],[68,50,74,40],[68,53,74,43,"BACKEND_URL"],[68,64,74,54],[68,84,74,74],[68,86,74,76],[69,10,75,8,"email"],[69,15,75,13],[70,10,76,8,"password"],[70,18,76,16],[71,10,77,8,"nome"],[72,8,78,6],[72,9,78,7],[72,10,78,8],[73,8,80,6],[73,14,80,12],[74,10,80,14,"access_token"],[74,22,80,26],[75,10,80,28,"user"],[75,14,80,32],[75,16,80,34,"userData"],[76,8,80,43],[76,9,80,44],[76,12,80,47,"response"],[76,20,80,55],[76,21,80,56,"data"],[76,25,80,60],[77,8,82,6,"setToken"],[77,16,82,14],[77,17,82,15,"access_token"],[77,29,82,27],[77,30,82,28],[78,8,83,6,"setUser"],[78,15,83,13],[78,16,83,14,"userData"],[78,24,83,22],[78,25,83,23],[79,8,85,6],[79,14,85,12,"AsyncStorage"],[79,26,85,24],[79,27,85,24,"default"],[79,34,85,24],[79,35,85,25,"setItem"],[79,42,85,32],[79,43,85,33],[79,50,85,40],[79,52,85,42,"access_token"],[79,64,85,54],[79,65,85,55],[80,8,86,6],[80,14,86,12,"AsyncStorage"],[80,26,86,24],[80,27,86,24,"default"],[80,34,86,24],[80,35,86,25,"setItem"],[80,42,86,32],[80,43,86,33],[80,49,86,39],[80,51,86,41,"JSON"],[80,55,86,45],[80,56,86,46,"stringify"],[80,65,86,55],[80,66,86,56,"userData"],[80,74,86,64],[80,75,86,65],[80,76,86,66],[81,6,87,4],[81,7,87,5],[81,8,87,6],[81,15,87,13,"error"],[81,20,87,23],[81,22,87,25],[82,8,88,6],[82,14,88,12,"message"],[82,21,88,19],[82,24,88,22,"error"],[82,29,88,27],[82,30,88,28,"response"],[82,38,88,36],[82,40,88,38,"data"],[82,44,88,42],[82,46,88,44,"detail"],[82,52,88,50],[82,56,88,54],[82,89,88,87],[83,8,89,6],[83,14,89,12],[83,18,89,16,"Error"],[83,23,89,21],[83,24,89,22,"message"],[83,31,89,29],[83,32,89,30],[84,6,90,4],[85,4,91,2],[85,5,91,3],[86,4,93,2],[86,10,93,8,"logout"],[86,16,93,14],[86,19,93,17],[86,25,93,17,"logout"],[86,26,93,17],[86,31,93,29],[87,6,94,4],[87,10,94,8],[88,8,95,6],[88,14,95,12,"AsyncStorage"],[88,26,95,24],[88,27,95,24,"default"],[88,34,95,24],[88,35,95,25,"removeItem"],[88,45,95,35],[88,46,95,36],[88,53,95,43],[88,54,95,44],[89,8,96,6],[89,14,96,12,"AsyncStorage"],[89,26,96,24],[89,27,96,24,"default"],[89,34,96,24],[89,35,96,25,"removeItem"],[89,45,96,35],[89,46,96,36],[89,52,96,42],[89,53,96,43],[90,8,97,6,"setUser"],[90,15,97,13],[90,16,97,14],[90,20,97,18],[90,21,97,19],[91,8,98,6,"setToken"],[91,16,98,14],[91,17,98,15],[91,21,98,19],[91,22,98,20],[92,6,99,4],[92,7,99,5],[92,8,99,6],[92,15,99,13,"error"],[92,20,99,18],[92,22,99,20],[93,8,100,6,"console"],[93,15,100,13],[93,16,100,14,"error"],[93,21,100,19],[93,22,100,20],[93,42,100,40],[93,44,100,42,"error"],[93,49,100,47],[93,50,100,48],[94,6,101,4],[95,4,102,2],[95,5,102,3],[96,4,104,2],[96,24,105,4],[96,28,105,4,"_reactJsxDevRuntime"],[96,47,105,4],[96,48,105,4,"jsxDEV"],[96,54,105,4],[96,56,105,5,"AuthContext"],[96,67,105,16],[96,68,105,17,"Provider"],[96,76,105,25],[97,6,105,26,"value"],[97,11,105,31],[97,13,105,33],[98,8,105,35,"user"],[98,12,105,39],[99,8,105,41,"token"],[99,13,105,46],[100,8,105,48,"isLoading"],[100,17,105,57],[101,8,105,59,"login"],[101,13,105,64],[102,8,105,66,"register"],[102,16,105,74],[103,8,105,76,"logout"],[104,6,105,83],[104,7,105,85],[105,6,105,85,"children"],[105,14,105,85],[105,16,106,7,"children"],[106,4,106,15],[107,6,106,15,"fileName"],[107,14,106,15],[107,16,106,15,"_jsxFileName"],[107,28,106,15],[108,6,106,15,"lineNumber"],[108,16,106,15],[109,6,106,15,"columnNumber"],[109,18,106,15],[110,4,106,15],[110,11,107,26],[110,12,107,27],[111,2,109,0],[112,2,111,7],[112,11,111,16,"useAuth"],[112,18,111,23,"useAuth"],[112,19,111,23],[112,21,111,26],[113,4,112,2],[113,10,112,8,"context"],[113,17,112,15],[113,20,112,18],[113,24,112,18,"useContext"],[113,30,112,28],[113,31,112,28,"useContext"],[113,41,112,28],[113,43,112,29,"AuthContext"],[113,54,112,40],[113,55,112,41],[114,4,113,2],[114,8,113,6,"context"],[114,15,113,13],[114,20,113,18,"undefined"],[114,29,113,27],[114,31,113,29],[115,6,114,4],[115,12,114,10],[115,16,114,14,"Error"],[115,21,114,19],[115,22,114,20],[115,67,114,65],[115,68,114,66],[116,4,115,2],[117,4,116,2],[117,11,116,9,"context"],[117,18,116,16],[118,2,117,0],[119,0,117,1],[119,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;yBEE;GFc;gBGE;GHkB;mBIE;GJmB;iBKE;GLS;CDO;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}