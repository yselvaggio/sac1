{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (storedToken) {\n          // Verify token with backend\n          const response = await axios.default.get(`${BACKEND_URL}/api/auth/verify?token=${storedToken}`);\n          setUser(response.data);\n          setToken(storedToken);\n        }\n      } catch (error) {\n        // Token invalid or expired, clear storage\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/login`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Errore durante il login';\n        throw new Error(message);\n      }\n    };\n    const register = async (email, password, nome) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/register`, {\n          email,\n          password,\n          nome\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Errore durante la registrazione';\n        throw new Error(message);\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n        setUser(null);\n        setToken(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":121,"map":[[13,2,27,0,"exports"],[13,9,27,0],[13,10,27,0,"AuthProvider"],[13,22,27,0],[13,25,27,0,"AuthProvider"],[13,37,27,0],[14,2,113,0,"exports"],[14,9,113,0],[14,10,113,0,"useAuth"],[14,17,113,0],[14,20,113,0,"useAuth"],[14,27,113,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_axios"],[18,12,3,0],[18,15,3,0,"require"],[18,22,3,0],[18,23,3,0,"_dependencyMap"],[18,37,3,0],[19,2,3,0],[19,6,3,0,"axios"],[19,11,3,0],[19,14,3,0,"_interopDefault"],[19,29,3,0],[19,30,3,0,"_axios"],[19,36,3,0],[20,2,3,26],[20,6,3,26,"_reactJsxDevRuntime"],[20,25,3,26],[20,28,3,26,"require"],[20,35,3,26],[20,36,3,26,"_dependencyMap"],[20,50,3,26],[21,2,5,0],[21,8,5,6,"BACKEND_URL"],[21,19,5,17],[21,22,5,20,"process"],[21,29,5,27],[21,30,5,28,"env"],[21,33,5,31],[21,34,5,32,"EXPO_PUBLIC_BACKEND_URL"],[21,57,5,55],[22,2,25,0],[22,8,25,6,"AuthContext"],[22,19,25,17],[22,35,25,20],[22,39,25,20,"createContext"],[22,45,25,33],[22,46,25,33,"createContext"],[22,59,25,33],[22,61,25,63,"undefined"],[22,70,25,72],[22,71,25,73],[23,2,27,7],[23,11,27,16,"AuthProvider"],[23,23,27,28,"AuthProvider"],[23,24,27,29],[24,4,27,31,"children"],[25,2,27,65],[25,3,27,66],[25,5,27,68],[26,4,28,2],[26,10,28,8],[26,11,28,9,"user"],[26,15,28,13],[26,17,28,15,"setUser"],[26,24,28,22],[26,25,28,23],[26,28,28,26],[26,32,28,26,"useState"],[26,38,28,34],[26,39,28,34,"useState"],[26,47,28,34],[26,49,28,48],[26,53,28,52],[26,54,28,53],[27,4,29,2],[27,10,29,8],[27,11,29,9,"token"],[27,16,29,14],[27,18,29,16,"setToken"],[27,26,29,24],[27,27,29,25],[27,30,29,28],[27,34,29,28,"useState"],[27,40,29,36],[27,41,29,36,"useState"],[27,49,29,36],[27,51,29,52],[27,55,29,56],[27,56,29,57],[28,4,30,2],[28,10,30,8],[28,11,30,9,"isLoading"],[28,20,30,18],[28,22,30,20,"setIsLoading"],[28,34,30,32],[28,35,30,33],[28,38,30,36],[28,42,30,36,"useState"],[28,48,30,44],[28,49,30,44,"useState"],[28,57,30,44],[28,59,30,45],[28,63,30,49],[28,64,30,50],[29,4,32,2],[29,8,32,2,"useEffect"],[29,14,32,11],[29,15,32,11,"useEffect"],[29,24,32,11],[29,26,32,12],[29,32,32,18],[30,6,33,4,"loadStoredAuth"],[30,20,33,18],[30,21,33,19],[30,22,33,20],[31,4,34,2],[31,5,34,3],[31,7,34,5],[31,9,34,7],[31,10,34,8],[32,4,36,2],[32,10,36,8,"loadStoredAuth"],[32,24,36,22],[32,27,36,25],[32,33,36,25,"loadStoredAuth"],[32,34,36,25],[32,39,36,37],[33,6,37,4],[33,10,37,8],[34,8,38,6],[34,14,38,12,"storedToken"],[34,25,38,23],[34,28,38,26],[34,34,38,32,"AsyncStorage"],[34,46,38,44],[34,47,38,44,"default"],[34,54,38,44],[34,55,38,45,"getItem"],[34,62,38,52],[34,63,38,53],[34,70,38,60],[34,71,38,61],[35,8,39,6],[35,12,39,10,"storedToken"],[35,23,39,21],[35,25,39,23],[36,10,40,8],[37,10,41,8],[37,16,41,14,"response"],[37,24,41,22],[37,27,41,25],[37,33,41,31,"axios"],[37,38,41,36],[37,39,41,36,"default"],[37,46,41,36],[37,47,41,37,"get"],[37,50,41,40],[37,51,41,41],[37,54,41,44,"BACKEND_URL"],[37,65,41,55],[37,91,41,81,"storedToken"],[37,102,41,92],[37,104,41,94],[37,105,41,95],[38,10,42,8,"setUser"],[38,17,42,15],[38,18,42,16,"response"],[38,26,42,24],[38,27,42,25,"data"],[38,31,42,29],[38,32,42,30],[39,10,43,8,"setToken"],[39,18,43,16],[39,19,43,17,"storedToken"],[39,30,43,28],[39,31,43,29],[40,8,44,6],[41,6,45,4],[41,7,45,5],[41,8,45,6],[41,15,45,13,"error"],[41,20,45,18],[41,22,45,20],[42,8,46,6],[43,8,47,6],[43,14,47,12,"AsyncStorage"],[43,26,47,24],[43,27,47,24,"default"],[43,34,47,24],[43,35,47,25,"removeItem"],[43,45,47,35],[43,46,47,36],[43,53,47,43],[43,54,47,44],[44,8,48,6],[44,14,48,12,"AsyncStorage"],[44,26,48,24],[44,27,48,24,"default"],[44,34,48,24],[44,35,48,25,"removeItem"],[44,45,48,35],[44,46,48,36],[44,52,48,42],[44,53,48,43],[45,6,49,4],[45,7,49,5],[45,16,49,14],[46,8,50,6,"setIsLoading"],[46,20,50,18],[46,21,50,19],[46,26,50,24],[46,27,50,25],[47,6,51,4],[48,4,52,2],[48,5,52,3],[49,4,54,2],[49,10,54,8,"login"],[49,15,54,13],[49,18,54,16],[49,24,54,16,"login"],[49,25,54,23,"email"],[49,30,54,36],[49,32,54,38,"password"],[49,40,54,54],[49,45,54,59],[50,6,55,4],[50,10,55,8],[51,8,56,6],[51,14,56,12,"response"],[51,22,56,20],[51,25,56,23],[51,31,56,29,"axios"],[51,36,56,34],[51,37,56,34,"default"],[51,44,56,34],[51,45,56,35,"post"],[51,49,56,39],[51,50,56,40],[51,53,56,43,"BACKEND_URL"],[51,64,56,54],[51,81,56,71],[51,83,56,73],[52,10,57,8,"email"],[52,15,57,13],[53,10,58,8,"password"],[54,8,59,6],[54,9,59,7],[54,10,59,8],[55,8,61,6],[55,14,61,12],[56,10,61,14,"access_token"],[56,22,61,26],[57,10,61,28,"user"],[57,14,61,32],[57,16,61,34,"userData"],[58,8,61,43],[58,9,61,44],[58,12,61,47,"response"],[58,20,61,55],[58,21,61,56,"data"],[58,25,61,60],[59,8,63,6,"setToken"],[59,16,63,14],[59,17,63,15,"access_token"],[59,29,63,27],[59,30,63,28],[60,8,64,6,"setUser"],[60,15,64,13],[60,16,64,14,"userData"],[60,24,64,22],[60,25,64,23],[61,8,66,6],[61,14,66,12,"AsyncStorage"],[61,26,66,24],[61,27,66,24,"default"],[61,34,66,24],[61,35,66,25,"setItem"],[61,42,66,32],[61,43,66,33],[61,50,66,40],[61,52,66,42,"access_token"],[61,64,66,54],[61,65,66,55],[62,8,67,6],[62,14,67,12,"AsyncStorage"],[62,26,67,24],[62,27,67,24,"default"],[62,34,67,24],[62,35,67,25,"setItem"],[62,42,67,32],[62,43,67,33],[62,49,67,39],[62,51,67,41,"JSON"],[62,55,67,45],[62,56,67,46,"stringify"],[62,65,67,55],[62,66,67,56,"userData"],[62,74,67,64],[62,75,67,65],[62,76,67,66],[63,6,68,4],[63,7,68,5],[63,8,68,6],[63,15,68,13,"error"],[63,20,68,23],[63,22,68,25],[64,8,69,6],[64,14,69,12,"message"],[64,21,69,19],[64,24,69,22,"error"],[64,29,69,27],[64,30,69,28,"response"],[64,38,69,36],[64,40,69,38,"data"],[64,44,69,42],[64,46,69,44,"detail"],[64,52,69,50],[64,56,69,54],[64,81,69,79],[65,8,70,6],[65,14,70,12],[65,18,70,16,"Error"],[65,23,70,21],[65,24,70,22,"message"],[65,31,70,29],[65,32,70,30],[66,6,71,4],[67,4,72,2],[67,5,72,3],[68,4,74,2],[68,10,74,8,"register"],[68,18,74,16],[68,21,74,19],[68,27,74,19,"register"],[68,28,74,26,"email"],[68,33,74,39],[68,35,74,41,"password"],[68,43,74,57],[68,45,74,59,"nome"],[68,49,74,71],[68,54,74,76],[69,6,75,4],[69,10,75,8],[70,8,76,6],[70,14,76,12,"response"],[70,22,76,20],[70,25,76,23],[70,31,76,29,"axios"],[70,36,76,34],[70,37,76,34,"default"],[70,44,76,34],[70,45,76,35,"post"],[70,49,76,39],[70,50,76,40],[70,53,76,43,"BACKEND_URL"],[70,64,76,54],[70,84,76,74],[70,86,76,76],[71,10,77,8,"email"],[71,15,77,13],[72,10,78,8,"password"],[72,18,78,16],[73,10,79,8,"nome"],[74,8,80,6],[74,9,80,7],[74,10,80,8],[75,8,82,6],[75,14,82,12],[76,10,82,14,"access_token"],[76,22,82,26],[77,10,82,28,"user"],[77,14,82,32],[77,16,82,34,"userData"],[78,8,82,43],[78,9,82,44],[78,12,82,47,"response"],[78,20,82,55],[78,21,82,56,"data"],[78,25,82,60],[79,8,84,6,"setToken"],[79,16,84,14],[79,17,84,15,"access_token"],[79,29,84,27],[79,30,84,28],[80,8,85,6,"setUser"],[80,15,85,13],[80,16,85,14,"userData"],[80,24,85,22],[80,25,85,23],[81,8,87,6],[81,14,87,12,"AsyncStorage"],[81,26,87,24],[81,27,87,24,"default"],[81,34,87,24],[81,35,87,25,"setItem"],[81,42,87,32],[81,43,87,33],[81,50,87,40],[81,52,87,42,"access_token"],[81,64,87,54],[81,65,87,55],[82,8,88,6],[82,14,88,12,"AsyncStorage"],[82,26,88,24],[82,27,88,24,"default"],[82,34,88,24],[82,35,88,25,"setItem"],[82,42,88,32],[82,43,88,33],[82,49,88,39],[82,51,88,41,"JSON"],[82,55,88,45],[82,56,88,46,"stringify"],[82,65,88,55],[82,66,88,56,"userData"],[82,74,88,64],[82,75,88,65],[82,76,88,66],[83,6,89,4],[83,7,89,5],[83,8,89,6],[83,15,89,13,"error"],[83,20,89,23],[83,22,89,25],[84,8,90,6],[84,14,90,12,"message"],[84,21,90,19],[84,24,90,22,"error"],[84,29,90,27],[84,30,90,28,"response"],[84,38,90,36],[84,40,90,38,"data"],[84,44,90,42],[84,46,90,44,"detail"],[84,52,90,50],[84,56,90,54],[84,89,90,87],[85,8,91,6],[85,14,91,12],[85,18,91,16,"Error"],[85,23,91,21],[85,24,91,22,"message"],[85,31,91,29],[85,32,91,30],[86,6,92,4],[87,4,93,2],[87,5,93,3],[88,4,95,2],[88,10,95,8,"logout"],[88,16,95,14],[88,19,95,17],[88,25,95,17,"logout"],[88,26,95,17],[88,31,95,29],[89,6,96,4],[89,10,96,8],[90,8,97,6],[90,14,97,12,"AsyncStorage"],[90,26,97,24],[90,27,97,24,"default"],[90,34,97,24],[90,35,97,25,"removeItem"],[90,45,97,35],[90,46,97,36],[90,53,97,43],[90,54,97,44],[91,8,98,6],[91,14,98,12,"AsyncStorage"],[91,26,98,24],[91,27,98,24,"default"],[91,34,98,24],[91,35,98,25,"removeItem"],[91,45,98,35],[91,46,98,36],[91,52,98,42],[91,53,98,43],[92,8,99,6,"setUser"],[92,15,99,13],[92,16,99,14],[92,20,99,18],[92,21,99,19],[93,8,100,6,"setToken"],[93,16,100,14],[93,17,100,15],[93,21,100,19],[93,22,100,20],[94,6,101,4],[94,7,101,5],[94,8,101,6],[94,15,101,13,"error"],[94,20,101,18],[94,22,101,20],[95,8,102,6,"console"],[95,15,102,13],[95,16,102,14,"error"],[95,21,102,19],[95,22,102,20],[95,42,102,40],[95,44,102,42,"error"],[95,49,102,47],[95,50,102,48],[96,6,103,4],[97,4,104,2],[97,5,104,3],[98,4,106,2],[98,24,107,4],[98,28,107,4,"_reactJsxDevRuntime"],[98,47,107,4],[98,48,107,4,"jsxDEV"],[98,54,107,4],[98,56,107,5,"AuthContext"],[98,67,107,16],[98,68,107,17,"Provider"],[98,76,107,25],[99,6,107,26,"value"],[99,11,107,31],[99,13,107,33],[100,8,107,35,"user"],[100,12,107,39],[101,8,107,41,"token"],[101,13,107,46],[102,8,107,48,"isLoading"],[102,17,107,57],[103,8,107,59,"login"],[103,13,107,64],[104,8,107,66,"register"],[104,16,107,74],[105,8,107,76,"logout"],[106,6,107,83],[106,7,107,85],[107,6,107,85,"children"],[107,14,107,85],[107,16,108,7,"children"],[108,4,108,15],[109,6,108,15,"fileName"],[109,14,108,15],[109,16,108,15,"_jsxFileName"],[109,28,108,15],[110,6,108,15,"lineNumber"],[110,16,108,15],[111,6,108,15,"columnNumber"],[111,18,108,15],[112,4,108,15],[112,11,109,26],[112,12,109,27],[113,2,111,0],[114,2,113,7],[114,11,113,16,"useAuth"],[114,18,113,23,"useAuth"],[114,19,113,23],[114,21,113,26],[115,4,114,2],[115,10,114,8,"context"],[115,17,114,15],[115,20,114,18],[115,24,114,18,"useContext"],[115,30,114,28],[115,31,114,28,"useContext"],[115,41,114,28],[115,43,114,29,"AuthContext"],[115,54,114,40],[115,55,114,41],[116,4,115,2],[116,8,115,6,"context"],[116,15,115,13],[116,20,115,18,"undefined"],[116,29,115,27],[116,31,115,29],[117,6,116,4],[117,12,116,10],[117,16,116,14,"Error"],[117,21,116,19],[117,22,116,20],[117,67,116,65],[117,68,116,66],[118,4,117,2],[119,4,118,2],[119,11,118,9,"context"],[119,18,118,16],[120,2,119,0],[121,0,119,1],[121,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;yBEE;GFgB;gBGE;GHkB;mBIE;GJmB;iBKE;GLS;CDO;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}