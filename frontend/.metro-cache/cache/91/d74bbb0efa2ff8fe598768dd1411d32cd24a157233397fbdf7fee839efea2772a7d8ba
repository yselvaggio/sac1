{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (storedToken) {\n          const response = await axios.default.get(`${BACKEND_URL}/api/auth/verify?token=${storedToken}`);\n          setUser(response.data);\n          setToken(storedToken);\n        }\n      } catch (error) {\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/login`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Errore durante il login';\n        throw new Error(message);\n      }\n    };\n    const register = async (email, password, nome) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/register`, {\n          email,\n          password,\n          nome\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Errore durante la registrazione';\n        throw new Error(message);\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n        setUser(null);\n        setToken(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":129,"map":[[15,2,27,0,"exports"],[15,9,27,0],[15,10,27,0,"AuthProvider"],[15,22,27,0],[15,25,27,0,"AuthProvider"],[15,37,27,0],[16,2,111,0,"exports"],[16,9,111,0],[16,10,111,0,"useAuth"],[16,17,111,0],[16,20,111,0,"useAuth"],[16,27,111,0],[17,2,117,1],[17,6,117,1,"_expoVirtualEnv"],[17,21,117,1],[17,24,117,1,"require"],[17,31,117,1],[17,32,117,1,"_dependencyMap"],[17,46,117,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_axios"],[21,12,3,0],[21,15,3,0,"require"],[21,22,3,0],[21,23,3,0,"_dependencyMap"],[21,37,3,0],[22,2,3,0],[22,6,3,0,"axios"],[22,11,3,0],[22,14,3,0,"_interopDefault"],[22,29,3,0],[22,30,3,0,"_axios"],[22,36,3,0],[23,2,3,26],[23,6,3,26,"_reactJsxDevRuntime"],[23,25,3,26],[23,28,3,26,"require"],[23,35,3,26],[23,36,3,26,"_dependencyMap"],[23,50,3,26],[24,2,5,0],[24,8,5,6,"BACKEND_URL"],[24,19,5,17],[24,22,5,17,"_expoVirtualEnv"],[24,37,5,17],[24,38,5,17,"env"],[24,41,5,17],[24,42,5,17,"EXPO_PUBLIC_BACKEND_URL"],[24,65,5,55],[25,2,25,0],[25,8,25,6,"AuthContext"],[25,19,25,17],[25,35,25,20],[25,39,25,20,"createContext"],[25,45,25,33],[25,46,25,33,"createContext"],[25,59,25,33],[25,61,25,63,"undefined"],[25,70,25,72],[25,71,25,73],[26,2,27,7],[26,11,27,16,"AuthProvider"],[26,23,27,28,"AuthProvider"],[26,24,27,29],[27,4,27,31,"children"],[28,2,27,65],[28,3,27,66],[28,5,27,68],[29,4,27,68,"_s"],[29,6,27,68],[30,4,28,2],[30,10,28,8],[30,11,28,9,"user"],[30,15,28,13],[30,17,28,15,"setUser"],[30,24,28,22],[30,25,28,23],[30,28,28,26],[30,32,28,26,"useState"],[30,38,28,34],[30,39,28,34,"useState"],[30,47,28,34],[30,49,28,48],[30,53,28,52],[30,54,28,53],[31,4,29,2],[31,10,29,8],[31,11,29,9,"token"],[31,16,29,14],[31,18,29,16,"setToken"],[31,26,29,24],[31,27,29,25],[31,30,29,28],[31,34,29,28,"useState"],[31,40,29,36],[31,41,29,36,"useState"],[31,49,29,36],[31,51,29,52],[31,55,29,56],[31,56,29,57],[32,4,30,2],[32,10,30,8],[32,11,30,9,"isLoading"],[32,20,30,18],[32,22,30,20,"setIsLoading"],[32,34,30,32],[32,35,30,33],[32,38,30,36],[32,42,30,36,"useState"],[32,48,30,44],[32,49,30,44,"useState"],[32,57,30,44],[32,59,30,45],[32,63,30,49],[32,64,30,50],[33,4,32,2],[33,8,32,2,"useEffect"],[33,14,32,11],[33,15,32,11,"useEffect"],[33,24,32,11],[33,26,32,12],[33,32,32,18],[34,6,33,4,"loadStoredAuth"],[34,20,33,18],[34,21,33,19],[34,22,33,20],[35,4,34,2],[35,5,34,3],[35,7,34,5],[35,9,34,7],[35,10,34,8],[36,4,36,2],[36,10,36,8,"loadStoredAuth"],[36,24,36,22],[36,27,36,25],[36,33,36,25,"loadStoredAuth"],[36,34,36,25],[36,39,36,37],[37,6,37,4],[37,10,37,8],[38,8,38,6],[38,14,38,12,"storedToken"],[38,25,38,23],[38,28,38,26],[38,34,38,32,"AsyncStorage"],[38,46,38,44],[38,47,38,44,"default"],[38,54,38,44],[38,55,38,45,"getItem"],[38,62,38,52],[38,63,38,53],[38,70,38,60],[38,71,38,61],[39,8,39,6],[39,12,39,10,"storedToken"],[39,23,39,21],[39,25,39,23],[40,10,40,8],[40,16,40,14,"response"],[40,24,40,22],[40,27,40,25],[40,33,40,31,"axios"],[40,38,40,36],[40,39,40,36,"default"],[40,46,40,36],[40,47,40,37,"get"],[40,50,40,40],[40,51,40,41],[40,54,40,44,"BACKEND_URL"],[40,65,40,55],[40,91,40,81,"storedToken"],[40,102,40,92],[40,104,40,94],[40,105,40,95],[41,10,41,8,"setUser"],[41,17,41,15],[41,18,41,16,"response"],[41,26,41,24],[41,27,41,25,"data"],[41,31,41,29],[41,32,41,30],[42,10,42,8,"setToken"],[42,18,42,16],[42,19,42,17,"storedToken"],[42,30,42,28],[42,31,42,29],[43,8,43,6],[44,6,44,4],[44,7,44,5],[44,8,44,6],[44,15,44,13,"error"],[44,20,44,18],[44,22,44,20],[45,8,45,6],[45,14,45,12,"AsyncStorage"],[45,26,45,24],[45,27,45,24,"default"],[45,34,45,24],[45,35,45,25,"removeItem"],[45,45,45,35],[45,46,45,36],[45,53,45,43],[45,54,45,44],[46,8,46,6],[46,14,46,12,"AsyncStorage"],[46,26,46,24],[46,27,46,24,"default"],[46,34,46,24],[46,35,46,25,"removeItem"],[46,45,46,35],[46,46,46,36],[46,52,46,42],[46,53,46,43],[47,6,47,4],[47,7,47,5],[47,16,47,14],[48,8,48,6,"setIsLoading"],[48,20,48,18],[48,21,48,19],[48,26,48,24],[48,27,48,25],[49,6,49,4],[50,4,50,2],[50,5,50,3],[51,4,52,2],[51,10,52,8,"login"],[51,15,52,13],[51,18,52,16],[51,24,52,16,"login"],[51,25,52,23,"email"],[51,30,52,36],[51,32,52,38,"password"],[51,40,52,54],[51,45,52,59],[52,6,53,4],[52,10,53,8],[53,8,54,6],[53,14,54,12,"response"],[53,22,54,20],[53,25,54,23],[53,31,54,29,"axios"],[53,36,54,34],[53,37,54,34,"default"],[53,44,54,34],[53,45,54,35,"post"],[53,49,54,39],[53,50,54,40],[53,53,54,43,"BACKEND_URL"],[53,64,54,54],[53,81,54,71],[53,83,54,73],[54,10,55,8,"email"],[54,15,55,13],[55,10,56,8,"password"],[56,8,57,6],[56,9,57,7],[56,10,57,8],[57,8,59,6],[57,14,59,12],[58,10,59,14,"access_token"],[58,22,59,26],[59,10,59,28,"user"],[59,14,59,32],[59,16,59,34,"userData"],[60,8,59,43],[60,9,59,44],[60,12,59,47,"response"],[60,20,59,55],[60,21,59,56,"data"],[60,25,59,60],[61,8,61,6,"setToken"],[61,16,61,14],[61,17,61,15,"access_token"],[61,29,61,27],[61,30,61,28],[62,8,62,6,"setUser"],[62,15,62,13],[62,16,62,14,"userData"],[62,24,62,22],[62,25,62,23],[63,8,64,6],[63,14,64,12,"AsyncStorage"],[63,26,64,24],[63,27,64,24,"default"],[63,34,64,24],[63,35,64,25,"setItem"],[63,42,64,32],[63,43,64,33],[63,50,64,40],[63,52,64,42,"access_token"],[63,64,64,54],[63,65,64,55],[64,8,65,6],[64,14,65,12,"AsyncStorage"],[64,26,65,24],[64,27,65,24,"default"],[64,34,65,24],[64,35,65,25,"setItem"],[64,42,65,32],[64,43,65,33],[64,49,65,39],[64,51,65,41,"JSON"],[64,55,65,45],[64,56,65,46,"stringify"],[64,65,65,55],[64,66,65,56,"userData"],[64,74,65,64],[64,75,65,65],[64,76,65,66],[65,6,66,4],[65,7,66,5],[65,8,66,6],[65,15,66,13,"error"],[65,20,66,23],[65,22,66,25],[66,8,67,6],[66,14,67,12,"message"],[66,21,67,19],[66,24,67,22,"error"],[66,29,67,27],[66,30,67,28,"response"],[66,38,67,36],[66,40,67,38,"data"],[66,44,67,42],[66,46,67,44,"detail"],[66,52,67,50],[66,56,67,54],[66,81,67,79],[67,8,68,6],[67,14,68,12],[67,18,68,16,"Error"],[67,23,68,21],[67,24,68,22,"message"],[67,31,68,29],[67,32,68,30],[68,6,69,4],[69,4,70,2],[69,5,70,3],[70,4,72,2],[70,10,72,8,"register"],[70,18,72,16],[70,21,72,19],[70,27,72,19,"register"],[70,28,72,26,"email"],[70,33,72,39],[70,35,72,41,"password"],[70,43,72,57],[70,45,72,59,"nome"],[70,49,72,71],[70,54,72,76],[71,6,73,4],[71,10,73,8],[72,8,74,6],[72,14,74,12,"response"],[72,22,74,20],[72,25,74,23],[72,31,74,29,"axios"],[72,36,74,34],[72,37,74,34,"default"],[72,44,74,34],[72,45,74,35,"post"],[72,49,74,39],[72,50,74,40],[72,53,74,43,"BACKEND_URL"],[72,64,74,54],[72,84,74,74],[72,86,74,76],[73,10,75,8,"email"],[73,15,75,13],[74,10,76,8,"password"],[74,18,76,16],[75,10,77,8,"nome"],[76,8,78,6],[76,9,78,7],[76,10,78,8],[77,8,80,6],[77,14,80,12],[78,10,80,14,"access_token"],[78,22,80,26],[79,10,80,28,"user"],[79,14,80,32],[79,16,80,34,"userData"],[80,8,80,43],[80,9,80,44],[80,12,80,47,"response"],[80,20,80,55],[80,21,80,56,"data"],[80,25,80,60],[81,8,82,6,"setToken"],[81,16,82,14],[81,17,82,15,"access_token"],[81,29,82,27],[81,30,82,28],[82,8,83,6,"setUser"],[82,15,83,13],[82,16,83,14,"userData"],[82,24,83,22],[82,25,83,23],[83,8,85,6],[83,14,85,12,"AsyncStorage"],[83,26,85,24],[83,27,85,24,"default"],[83,34,85,24],[83,35,85,25,"setItem"],[83,42,85,32],[83,43,85,33],[83,50,85,40],[83,52,85,42,"access_token"],[83,64,85,54],[83,65,85,55],[84,8,86,6],[84,14,86,12,"AsyncStorage"],[84,26,86,24],[84,27,86,24,"default"],[84,34,86,24],[84,35,86,25,"setItem"],[84,42,86,32],[84,43,86,33],[84,49,86,39],[84,51,86,41,"JSON"],[84,55,86,45],[84,56,86,46,"stringify"],[84,65,86,55],[84,66,86,56,"userData"],[84,74,86,64],[84,75,86,65],[84,76,86,66],[85,6,87,4],[85,7,87,5],[85,8,87,6],[85,15,87,13,"error"],[85,20,87,23],[85,22,87,25],[86,8,88,6],[86,14,88,12,"message"],[86,21,88,19],[86,24,88,22,"error"],[86,29,88,27],[86,30,88,28,"response"],[86,38,88,36],[86,40,88,38,"data"],[86,44,88,42],[86,46,88,44,"detail"],[86,52,88,50],[86,56,88,54],[86,89,88,87],[87,8,89,6],[87,14,89,12],[87,18,89,16,"Error"],[87,23,89,21],[87,24,89,22,"message"],[87,31,89,29],[87,32,89,30],[88,6,90,4],[89,4,91,2],[89,5,91,3],[90,4,93,2],[90,10,93,8,"logout"],[90,16,93,14],[90,19,93,17],[90,25,93,17,"logout"],[90,26,93,17],[90,31,93,29],[91,6,94,4],[91,10,94,8],[92,8,95,6],[92,14,95,12,"AsyncStorage"],[92,26,95,24],[92,27,95,24,"default"],[92,34,95,24],[92,35,95,25,"removeItem"],[92,45,95,35],[92,46,95,36],[92,53,95,43],[92,54,95,44],[93,8,96,6],[93,14,96,12,"AsyncStorage"],[93,26,96,24],[93,27,96,24,"default"],[93,34,96,24],[93,35,96,25,"removeItem"],[93,45,96,35],[93,46,96,36],[93,52,96,42],[93,53,96,43],[94,8,97,6,"setUser"],[94,15,97,13],[94,16,97,14],[94,20,97,18],[94,21,97,19],[95,8,98,6,"setToken"],[95,16,98,14],[95,17,98,15],[95,21,98,19],[95,22,98,20],[96,6,99,4],[96,7,99,5],[96,8,99,6],[96,15,99,13,"error"],[96,20,99,18],[96,22,99,20],[97,8,100,6,"console"],[97,15,100,13],[97,16,100,14,"error"],[97,21,100,19],[97,22,100,20],[97,42,100,40],[97,44,100,42,"error"],[97,49,100,47],[97,50,100,48],[98,6,101,4],[99,4,102,2],[99,5,102,3],[100,4,104,2],[100,24,105,4],[100,28,105,4,"_reactJsxDevRuntime"],[100,47,105,4],[100,48,105,4,"jsxDEV"],[100,54,105,4],[100,56,105,5,"AuthContext"],[100,67,105,16],[100,68,105,17,"Provider"],[100,76,105,25],[101,6,105,26,"value"],[101,11,105,31],[101,13,105,33],[102,8,105,35,"user"],[102,12,105,39],[103,8,105,41,"token"],[103,13,105,46],[104,8,105,48,"isLoading"],[104,17,105,57],[105,8,105,59,"login"],[105,13,105,64],[106,8,105,66,"register"],[106,16,105,74],[107,8,105,76,"logout"],[108,6,105,83],[108,7,105,85],[109,6,105,85,"children"],[109,14,105,85],[109,16,106,7,"children"],[110,4,106,15],[111,6,106,15,"fileName"],[111,14,106,15],[111,16,106,15,"_jsxFileName"],[111,28,106,15],[112,6,106,15,"lineNumber"],[112,16,106,15],[113,6,106,15,"columnNumber"],[113,18,106,15],[114,4,106,15],[114,11,107,26],[114,12,107,27],[115,2,109,0],[116,2,109,1,"_s"],[116,4,109,1],[116,5,27,16,"AuthProvider"],[116,17,27,28],[117,2,27,28,"_c"],[117,4,27,28],[117,7,27,16,"AuthProvider"],[117,19,27,28],[118,2,111,7],[118,11,111,16,"useAuth"],[118,18,111,23,"useAuth"],[118,19,111,23],[118,21,111,26],[119,4,111,26,"_s2"],[119,7,111,26],[120,4,112,2],[120,10,112,8,"context"],[120,17,112,15],[120,20,112,18],[120,24,112,18,"useContext"],[120,30,112,28],[120,31,112,28,"useContext"],[120,41,112,28],[120,43,112,29,"AuthContext"],[120,54,112,40],[120,55,112,41],[121,4,113,2],[121,8,113,6,"context"],[121,15,113,13],[121,20,113,18,"undefined"],[121,29,113,27],[121,31,113,29],[122,6,114,4],[122,12,114,10],[122,16,114,14,"Error"],[122,21,114,19],[122,22,114,20],[122,67,114,65],[122,68,114,66],[123,4,115,2],[124,4,116,2],[124,11,116,9,"context"],[124,18,116,16],[125,2,117,0],[126,2,117,1,"_s2"],[126,5,117,1],[126,6,111,16,"useAuth"],[126,13,111,23],[127,2,111,23],[127,6,111,23,"_c"],[127,8,111,23],[128,2,111,23,"$RefreshReg$"],[128,14,111,23],[128,15,111,23,"_c"],[128,17,111,23],[129,0,111,23],[129,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;yBEE;GFc;gBGE;GHkB;mBIE;GJmB;iBKE;GLS;CDO;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}