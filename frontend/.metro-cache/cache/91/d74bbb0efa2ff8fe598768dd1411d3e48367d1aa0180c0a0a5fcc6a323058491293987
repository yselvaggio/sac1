{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (storedToken) {\n          // Verify token with backend\n          const response = await axios.default.get(`${BACKEND_URL}/api/auth/verify?token=${storedToken}`);\n          setUser(response.data);\n          setToken(storedToken);\n        }\n      } catch (error) {\n        // Token invalid or expired, clear storage\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/login`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Errore durante il login';\n        throw new Error(message);\n      }\n    };\n    const register = async (email, password, nome) => {\n      try {\n        const response = await axios.default.post(`${BACKEND_URL}/api/auth/register`, {\n          email,\n          password,\n          nome\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Errore durante la registrazione';\n        throw new Error(message);\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n        setUser(null);\n        setToken(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":131,"map":[[15,2,27,0,"exports"],[15,9,27,0],[15,10,27,0,"AuthProvider"],[15,22,27,0],[15,25,27,0,"AuthProvider"],[15,37,27,0],[16,2,113,0,"exports"],[16,9,113,0],[16,10,113,0,"useAuth"],[16,17,113,0],[16,20,113,0,"useAuth"],[16,27,113,0],[17,2,119,1],[17,6,119,1,"_expoVirtualEnv"],[17,21,119,1],[17,24,119,1,"require"],[17,31,119,1],[17,32,119,1,"_dependencyMap"],[17,46,119,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_axios"],[21,12,3,0],[21,15,3,0,"require"],[21,22,3,0],[21,23,3,0,"_dependencyMap"],[21,37,3,0],[22,2,3,0],[22,6,3,0,"axios"],[22,11,3,0],[22,14,3,0,"_interopDefault"],[22,29,3,0],[22,30,3,0,"_axios"],[22,36,3,0],[23,2,3,26],[23,6,3,26,"_reactJsxDevRuntime"],[23,25,3,26],[23,28,3,26,"require"],[23,35,3,26],[23,36,3,26,"_dependencyMap"],[23,50,3,26],[24,2,5,0],[24,8,5,6,"BACKEND_URL"],[24,19,5,17],[24,22,5,17,"_expoVirtualEnv"],[24,37,5,17],[24,38,5,17,"env"],[24,41,5,17],[24,42,5,17,"EXPO_PUBLIC_BACKEND_URL"],[24,65,5,55],[25,2,25,0],[25,8,25,6,"AuthContext"],[25,19,25,17],[25,35,25,20],[25,39,25,20,"createContext"],[25,45,25,33],[25,46,25,33,"createContext"],[25,59,25,33],[25,61,25,63,"undefined"],[25,70,25,72],[25,71,25,73],[26,2,27,7],[26,11,27,16,"AuthProvider"],[26,23,27,28,"AuthProvider"],[26,24,27,29],[27,4,27,31,"children"],[28,2,27,65],[28,3,27,66],[28,5,27,68],[29,4,27,68,"_s"],[29,6,27,68],[30,4,28,2],[30,10,28,8],[30,11,28,9,"user"],[30,15,28,13],[30,17,28,15,"setUser"],[30,24,28,22],[30,25,28,23],[30,28,28,26],[30,32,28,26,"useState"],[30,38,28,34],[30,39,28,34,"useState"],[30,47,28,34],[30,49,28,48],[30,53,28,52],[30,54,28,53],[31,4,29,2],[31,10,29,8],[31,11,29,9,"token"],[31,16,29,14],[31,18,29,16,"setToken"],[31,26,29,24],[31,27,29,25],[31,30,29,28],[31,34,29,28,"useState"],[31,40,29,36],[31,41,29,36,"useState"],[31,49,29,36],[31,51,29,52],[31,55,29,56],[31,56,29,57],[32,4,30,2],[32,10,30,8],[32,11,30,9,"isLoading"],[32,20,30,18],[32,22,30,20,"setIsLoading"],[32,34,30,32],[32,35,30,33],[32,38,30,36],[32,42,30,36,"useState"],[32,48,30,44],[32,49,30,44,"useState"],[32,57,30,44],[32,59,30,45],[32,63,30,49],[32,64,30,50],[33,4,32,2],[33,8,32,2,"useEffect"],[33,14,32,11],[33,15,32,11,"useEffect"],[33,24,32,11],[33,26,32,12],[33,32,32,18],[34,6,33,4,"loadStoredAuth"],[34,20,33,18],[34,21,33,19],[34,22,33,20],[35,4,34,2],[35,5,34,3],[35,7,34,5],[35,9,34,7],[35,10,34,8],[36,4,36,2],[36,10,36,8,"loadStoredAuth"],[36,24,36,22],[36,27,36,25],[36,33,36,25,"loadStoredAuth"],[36,34,36,25],[36,39,36,37],[37,6,37,4],[37,10,37,8],[38,8,38,6],[38,14,38,12,"storedToken"],[38,25,38,23],[38,28,38,26],[38,34,38,32,"AsyncStorage"],[38,46,38,44],[38,47,38,44,"default"],[38,54,38,44],[38,55,38,45,"getItem"],[38,62,38,52],[38,63,38,53],[38,70,38,60],[38,71,38,61],[39,8,39,6],[39,12,39,10,"storedToken"],[39,23,39,21],[39,25,39,23],[40,10,40,8],[41,10,41,8],[41,16,41,14,"response"],[41,24,41,22],[41,27,41,25],[41,33,41,31,"axios"],[41,38,41,36],[41,39,41,36,"default"],[41,46,41,36],[41,47,41,37,"get"],[41,50,41,40],[41,51,41,41],[41,54,41,44,"BACKEND_URL"],[41,65,41,55],[41,91,41,81,"storedToken"],[41,102,41,92],[41,104,41,94],[41,105,41,95],[42,10,42,8,"setUser"],[42,17,42,15],[42,18,42,16,"response"],[42,26,42,24],[42,27,42,25,"data"],[42,31,42,29],[42,32,42,30],[43,10,43,8,"setToken"],[43,18,43,16],[43,19,43,17,"storedToken"],[43,30,43,28],[43,31,43,29],[44,8,44,6],[45,6,45,4],[45,7,45,5],[45,8,45,6],[45,15,45,13,"error"],[45,20,45,18],[45,22,45,20],[46,8,46,6],[47,8,47,6],[47,14,47,12,"AsyncStorage"],[47,26,47,24],[47,27,47,24,"default"],[47,34,47,24],[47,35,47,25,"removeItem"],[47,45,47,35],[47,46,47,36],[47,53,47,43],[47,54,47,44],[48,8,48,6],[48,14,48,12,"AsyncStorage"],[48,26,48,24],[48,27,48,24,"default"],[48,34,48,24],[48,35,48,25,"removeItem"],[48,45,48,35],[48,46,48,36],[48,52,48,42],[48,53,48,43],[49,6,49,4],[49,7,49,5],[49,16,49,14],[50,8,50,6,"setIsLoading"],[50,20,50,18],[50,21,50,19],[50,26,50,24],[50,27,50,25],[51,6,51,4],[52,4,52,2],[52,5,52,3],[53,4,54,2],[53,10,54,8,"login"],[53,15,54,13],[53,18,54,16],[53,24,54,16,"login"],[53,25,54,23,"email"],[53,30,54,36],[53,32,54,38,"password"],[53,40,54,54],[53,45,54,59],[54,6,55,4],[54,10,55,8],[55,8,56,6],[55,14,56,12,"response"],[55,22,56,20],[55,25,56,23],[55,31,56,29,"axios"],[55,36,56,34],[55,37,56,34,"default"],[55,44,56,34],[55,45,56,35,"post"],[55,49,56,39],[55,50,56,40],[55,53,56,43,"BACKEND_URL"],[55,64,56,54],[55,81,56,71],[55,83,56,73],[56,10,57,8,"email"],[56,15,57,13],[57,10,58,8,"password"],[58,8,59,6],[58,9,59,7],[58,10,59,8],[59,8,61,6],[59,14,61,12],[60,10,61,14,"access_token"],[60,22,61,26],[61,10,61,28,"user"],[61,14,61,32],[61,16,61,34,"userData"],[62,8,61,43],[62,9,61,44],[62,12,61,47,"response"],[62,20,61,55],[62,21,61,56,"data"],[62,25,61,60],[63,8,63,6,"setToken"],[63,16,63,14],[63,17,63,15,"access_token"],[63,29,63,27],[63,30,63,28],[64,8,64,6,"setUser"],[64,15,64,13],[64,16,64,14,"userData"],[64,24,64,22],[64,25,64,23],[65,8,66,6],[65,14,66,12,"AsyncStorage"],[65,26,66,24],[65,27,66,24,"default"],[65,34,66,24],[65,35,66,25,"setItem"],[65,42,66,32],[65,43,66,33],[65,50,66,40],[65,52,66,42,"access_token"],[65,64,66,54],[65,65,66,55],[66,8,67,6],[66,14,67,12,"AsyncStorage"],[66,26,67,24],[66,27,67,24,"default"],[66,34,67,24],[66,35,67,25,"setItem"],[66,42,67,32],[66,43,67,33],[66,49,67,39],[66,51,67,41,"JSON"],[66,55,67,45],[66,56,67,46,"stringify"],[66,65,67,55],[66,66,67,56,"userData"],[66,74,67,64],[66,75,67,65],[66,76,67,66],[67,6,68,4],[67,7,68,5],[67,8,68,6],[67,15,68,13,"error"],[67,20,68,23],[67,22,68,25],[68,8,69,6],[68,14,69,12,"message"],[68,21,69,19],[68,24,69,22,"error"],[68,29,69,27],[68,30,69,28,"response"],[68,38,69,36],[68,40,69,38,"data"],[68,44,69,42],[68,46,69,44,"detail"],[68,52,69,50],[68,56,69,54],[68,81,69,79],[69,8,70,6],[69,14,70,12],[69,18,70,16,"Error"],[69,23,70,21],[69,24,70,22,"message"],[69,31,70,29],[69,32,70,30],[70,6,71,4],[71,4,72,2],[71,5,72,3],[72,4,74,2],[72,10,74,8,"register"],[72,18,74,16],[72,21,74,19],[72,27,74,19,"register"],[72,28,74,26,"email"],[72,33,74,39],[72,35,74,41,"password"],[72,43,74,57],[72,45,74,59,"nome"],[72,49,74,71],[72,54,74,76],[73,6,75,4],[73,10,75,8],[74,8,76,6],[74,14,76,12,"response"],[74,22,76,20],[74,25,76,23],[74,31,76,29,"axios"],[74,36,76,34],[74,37,76,34,"default"],[74,44,76,34],[74,45,76,35,"post"],[74,49,76,39],[74,50,76,40],[74,53,76,43,"BACKEND_URL"],[74,64,76,54],[74,84,76,74],[74,86,76,76],[75,10,77,8,"email"],[75,15,77,13],[76,10,78,8,"password"],[76,18,78,16],[77,10,79,8,"nome"],[78,8,80,6],[78,9,80,7],[78,10,80,8],[79,8,82,6],[79,14,82,12],[80,10,82,14,"access_token"],[80,22,82,26],[81,10,82,28,"user"],[81,14,82,32],[81,16,82,34,"userData"],[82,8,82,43],[82,9,82,44],[82,12,82,47,"response"],[82,20,82,55],[82,21,82,56,"data"],[82,25,82,60],[83,8,84,6,"setToken"],[83,16,84,14],[83,17,84,15,"access_token"],[83,29,84,27],[83,30,84,28],[84,8,85,6,"setUser"],[84,15,85,13],[84,16,85,14,"userData"],[84,24,85,22],[84,25,85,23],[85,8,87,6],[85,14,87,12,"AsyncStorage"],[85,26,87,24],[85,27,87,24,"default"],[85,34,87,24],[85,35,87,25,"setItem"],[85,42,87,32],[85,43,87,33],[85,50,87,40],[85,52,87,42,"access_token"],[85,64,87,54],[85,65,87,55],[86,8,88,6],[86,14,88,12,"AsyncStorage"],[86,26,88,24],[86,27,88,24,"default"],[86,34,88,24],[86,35,88,25,"setItem"],[86,42,88,32],[86,43,88,33],[86,49,88,39],[86,51,88,41,"JSON"],[86,55,88,45],[86,56,88,46,"stringify"],[86,65,88,55],[86,66,88,56,"userData"],[86,74,88,64],[86,75,88,65],[86,76,88,66],[87,6,89,4],[87,7,89,5],[87,8,89,6],[87,15,89,13,"error"],[87,20,89,23],[87,22,89,25],[88,8,90,6],[88,14,90,12,"message"],[88,21,90,19],[88,24,90,22,"error"],[88,29,90,27],[88,30,90,28,"response"],[88,38,90,36],[88,40,90,38,"data"],[88,44,90,42],[88,46,90,44,"detail"],[88,52,90,50],[88,56,90,54],[88,89,90,87],[89,8,91,6],[89,14,91,12],[89,18,91,16,"Error"],[89,23,91,21],[89,24,91,22,"message"],[89,31,91,29],[89,32,91,30],[90,6,92,4],[91,4,93,2],[91,5,93,3],[92,4,95,2],[92,10,95,8,"logout"],[92,16,95,14],[92,19,95,17],[92,25,95,17,"logout"],[92,26,95,17],[92,31,95,29],[93,6,96,4],[93,10,96,8],[94,8,97,6],[94,14,97,12,"AsyncStorage"],[94,26,97,24],[94,27,97,24,"default"],[94,34,97,24],[94,35,97,25,"removeItem"],[94,45,97,35],[94,46,97,36],[94,53,97,43],[94,54,97,44],[95,8,98,6],[95,14,98,12,"AsyncStorage"],[95,26,98,24],[95,27,98,24,"default"],[95,34,98,24],[95,35,98,25,"removeItem"],[95,45,98,35],[95,46,98,36],[95,52,98,42],[95,53,98,43],[96,8,99,6,"setUser"],[96,15,99,13],[96,16,99,14],[96,20,99,18],[96,21,99,19],[97,8,100,6,"setToken"],[97,16,100,14],[97,17,100,15],[97,21,100,19],[97,22,100,20],[98,6,101,4],[98,7,101,5],[98,8,101,6],[98,15,101,13,"error"],[98,20,101,18],[98,22,101,20],[99,8,102,6,"console"],[99,15,102,13],[99,16,102,14,"error"],[99,21,102,19],[99,22,102,20],[99,42,102,40],[99,44,102,42,"error"],[99,49,102,47],[99,50,102,48],[100,6,103,4],[101,4,104,2],[101,5,104,3],[102,4,106,2],[102,24,107,4],[102,28,107,4,"_reactJsxDevRuntime"],[102,47,107,4],[102,48,107,4,"jsxDEV"],[102,54,107,4],[102,56,107,5,"AuthContext"],[102,67,107,16],[102,68,107,17,"Provider"],[102,76,107,25],[103,6,107,26,"value"],[103,11,107,31],[103,13,107,33],[104,8,107,35,"user"],[104,12,107,39],[105,8,107,41,"token"],[105,13,107,46],[106,8,107,48,"isLoading"],[106,17,107,57],[107,8,107,59,"login"],[107,13,107,64],[108,8,107,66,"register"],[108,16,107,74],[109,8,107,76,"logout"],[110,6,107,83],[110,7,107,85],[111,6,107,85,"children"],[111,14,107,85],[111,16,108,7,"children"],[112,4,108,15],[113,6,108,15,"fileName"],[113,14,108,15],[113,16,108,15,"_jsxFileName"],[113,28,108,15],[114,6,108,15,"lineNumber"],[114,16,108,15],[115,6,108,15,"columnNumber"],[115,18,108,15],[116,4,108,15],[116,11,109,26],[116,12,109,27],[117,2,111,0],[118,2,111,1,"_s"],[118,4,111,1],[118,5,27,16,"AuthProvider"],[118,17,27,28],[119,2,27,28,"_c"],[119,4,27,28],[119,7,27,16,"AuthProvider"],[119,19,27,28],[120,2,113,7],[120,11,113,16,"useAuth"],[120,18,113,23,"useAuth"],[120,19,113,23],[120,21,113,26],[121,4,113,26,"_s2"],[121,7,113,26],[122,4,114,2],[122,10,114,8,"context"],[122,17,114,15],[122,20,114,18],[122,24,114,18,"useContext"],[122,30,114,28],[122,31,114,28,"useContext"],[122,41,114,28],[122,43,114,29,"AuthContext"],[122,54,114,40],[122,55,114,41],[123,4,115,2],[123,8,115,6,"context"],[123,15,115,13],[123,20,115,18,"undefined"],[123,29,115,27],[123,31,115,29],[124,6,116,4],[124,12,116,10],[124,16,116,14,"Error"],[124,21,116,19],[124,22,116,20],[124,67,116,65],[124,68,116,66],[125,4,117,2],[126,4,118,2],[126,11,118,9,"context"],[126,18,118,16],[127,2,119,0],[128,2,119,1,"_s2"],[128,5,119,1],[128,6,113,16,"useAuth"],[128,13,113,23],[129,2,113,23],[129,6,113,23,"_c"],[129,8,113,23],[130,2,113,23,"$RefreshReg$"],[130,14,113,23],[130,15,113,23,"_c"],[130,17,113,23],[131,0,113,23],[131,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;yBEE;GFgB;gBGE;GHkB;mBIE;GJmB;iBKE;GLS;CDO;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}