{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":13,"column":18},"end":{"line":13,"column":38}}],"key":"oQpL0Es3H146KnQH9ygFeHrzVP4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){'use strict';function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return s}});var t=e(r(d[0])),u=e(r(d[1])),n=r(d[2]),s=(function(){return(0,u.default)(function e(u){var n=u.onMoreTasks;(0,t.default)(this,e),this._onMoreTasks=n,this._queueStack=[{tasks:[],popable:!1}]},[{key:\"enqueue\",value:function(e){this._getCurrentQueue().push(e)}},{key:\"enqueueTasks\",value:function(e){var t=this;e.forEach(function(e){return t.enqueue(e)})}},{key:\"cancelTasks\",value:function(e){this._queueStack=this._queueStack.map(function(t){return Object.assign({},t,{tasks:t.tasks.filter(function(t){return-1===e.indexOf(t)})})}).filter(function(e,t){return e.tasks.length>0||0===t})}},{key:\"hasTasksToProcess\",value:function(){return this._getCurrentQueue().length>0}},{key:\"processNext\",value:function(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{'object'==typeof t&&t.gen?this._genPromise(t):'object'==typeof t&&t.run?t.run():(n('function'==typeof t,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(t,null,2)),t())}catch(e){throw e.message='TaskQueue: Error with task '+(t.name||'')+': '+e.message,e}}}},{key:\"_getCurrentQueue\",value:function(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&0===t.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}},{key:\"_genPromise\",value:function(e){var t=this;this._queueStack.push({tasks:[],popable:!1});var u=this._queueStack.length-1,n=this._queueStack[u];e.gen().then(function(){n.popable=!0,t.hasTasksToProcess()&&t._onMoreTasks()}).catch(function(t){setTimeout(function(){throw t.message=`TaskQueue: Error resolving Promise in task ${e.name}: ${t.message}`,t},0)})}}])})()});","lineCount":1,"map":[[1,29,11,0],[1,42,11,13],[1,51,11,13,"_interopDefault"],[1,53,11,13,"e"],[1,56,11,13],[1,63,11,13,"e"],[1,68,11,13,"__esModule"],[1,79,11,13,"e"],[1,81,11,13],[1,82,11,13,"default"],[1,90,11,13,"e"],[1,92,11,13],[1,93,11,13,"Object"],[1,100,11,13,"defineProperty"],[1,115,11,13,"_e"],[1,118,11,13],[1,132,11,13,"value"],[1,139,11,13],[1,143,183,0,"Object"],[1,150,183,0,"defineProperty"],[1,165,183,0,"_e"],[1,168,183,0],[1,179,183,0,"enumerable"],[1,191,183,0],[1,193,183,0,"get"],[1,197,183,0],[1,215,183,0,"_default"],[1,216,183,0],[1,220,183,25],[1,224,183,25,"_classCallCheck"],[1,226,183,25,"_interopDefault"],[1,228,183,25,"r"],[1,230,183,25,"d"],[1,232,183,25],[1,237,183,25,"_createClass"],[1,239,183,25,"_interopDefault"],[1,241,183,25,"r"],[1,243,183,25,"d"],[1,245,183,25],[1,250,13,6,"invariant"],[1,252,13,18,"require"],[1,254,13,25,"d"],[1,256,13,25],[1,260,183,0,"_default"],[1,263,43,15],[1,274,54,3],[1,283,54,3,"_createClass"],[1,285,54,3,"default"],[1,294,51,2],[1,303,51,2,"TaskQueue"],[1,305,51,2,"_ref"],[1,308,51,61],[1,312,51,15,"onMoreTasks"],[1,314,51,26,"_ref"],[1,316,51,15,"onMoreTasks"],[1,329,51,26],[1,331,51,26,"_classCallCheck"],[1,333,51,26,"default"],[1,342,51,26,"this"],[1,347,51,26,"TaskQueue"],[1,350,52,4,"this"],[1,355,52,9,"_onMoreTasks"],[1,368,52,24,"onMoreTasks"],[1,370,53,4,"this"],[1,375,53,9,"_queueStack"],[1,387,53,23],[1,388,53,24],[1,389,53,25,"tasks"],[1,395,53,32],[1,398,53,36,"popable"],[1,407,53,45],[1,410,54,2],[1,412,54,3],[1,414,54,3,"key"],[1,418,54,3],[1,428,54,3,"value"],[1,434,61,2],[1,443,61,10,"task"],[1,446,62,4,"this"],[1,451,62,9,"_getCurrentQueue"],[1,470,62,28,"push"],[1,475,62,33,"task"],[1,477,63,2],[1,480,63,3],[1,481,63,3,"key"],[1,485,63,3],[1,500,63,3,"value"],[1,506,65,2],[1,515,65,15,"tasks"],[1,518,65,41],[1,522,65,41,"_this"],[1,524,65,41,"this"],[1,529,66,4,"tasks"],[1,531,66,10,"forEach"],[1,539,66,18],[1,548,66,18,"task"],[1,551,66,22],[1,558,66,26,"_this"],[1,560,66,31,"enqueue"],[1,568,66,39,"task"],[1,570,66,44],[1,572,67,2],[1,575,67,3],[1,576,67,3,"key"],[1,580,67,3],[1,594,67,3,"value"],[1,600,69,2],[1,609,69,14,"tasksToCancel"],[1,612,71,4,"this"],[1,617,71,9,"_queueStack"],[1,629,71,23,"this"],[1,634,71,28,"_queueStack"],[1,646,72,7,"map"],[1,650,72,11],[1,659,72,11,"queue"],[1,662,72,16],[1,669,72,16,"Object"],[1,676,72,16,"assign"],[1,683,72,16],[1,686,73,11,"queue"],[1,688,73,16],[1,689,74,8,"tasks"],[1,695,74,15,"queue"],[1,697,74,21,"tasks"],[1,703,74,27,"filter"],[1,710,74,34],[1,719,74,34,"task"],[1,722,74,38],[1,729,74,69],[1,733,74,42,"tasksToCancel"],[1,735,74,56,"indexOf"],[1,743,74,64,"task"],[1,745,74,76],[1,749,74,77],[1,752,76,7,"filter"],[1,759,76,14],[1,768,76,15,"queue"],[1,770,76,22,"idx"],[1,773,76,25],[1,780,76,30,"queue"],[1,782,76,36,"tasks"],[1,788,76,42,"length"],[1,795,76,51],[1,798,76,64],[1,802,76,56,"idx"],[1,803,76,65],[1,805,77,2],[1,808,77,3],[1,809,77,3,"key"],[1,813,77,3],[1,833,77,3,"value"],[1,839,89,2],[1,850,90,4],[1,857,90,11,"this"],[1,862,90,16,"_getCurrentQueue"],[1,881,90,35,"length"],[1,888,90,44],[1,889,91,2],[1,892,91,3],[1,893,91,3,"key"],[1,897,91,3],[1,911,91,3,"value"],[1,917,96,2],[1,928,97,4],[1,932,97,10,"queue"],[1,934,97,18,"this"],[1,939,97,23,"_getCurrentQueue"],[1,958,98,4],[1,961,98,8,"queue"],[1,963,98,14,"length"],[1,970,98,22],[1,971,99,6],[1,975,99,12,"task"],[1,977,99,19,"queue"],[1,979,99,25,"shift"],[1,987,100,6],[1,991,101,28],[1,1008,101,19,"task"],[1,1011,101,40,"task"],[1,1013,101,45,"gen"],[1,1017,103,10,"this"],[1,1022,103,15,"_genPromise"],[1,1034,103,27,"task"],[1,1037,104,35],[1,1054,104,26,"task"],[1,1057,104,47,"task"],[1,1059,104,52,"run"],[1,1063,106,10,"task"],[1,1065,106,15,"run"],[1,1072,108,10,"invariant"],[1,1074,109,28],[1,1093,109,19,"task"],[1,1095,110,12],[1,1155,111,14,"JSON"],[1,1160,111,19,"stringify"],[1,1170,111,29,"task"],[1,1172,111,35],[1,1177,111,41],[1,1181,114,10,"task"],[1,1185,116,6],[1,1186,116,8],[1,1192,116,15,"e"],[1,1195,121,8],[1,1201,117,8,"e"],[1,1203,117,10,"message"],[1,1211,120,10],[1,1242,120,43,"task"],[1,1244,120,48,"name"],[1,1250,120,56],[1,1254,120,62],[1,1259,120,69,"e"],[1,1261,120,71,"message"],[1,1269,121,14,"e"],[1,1270,122,6],[1,1271,123,4],[1,1272,124,2],[1,1275,124,3],[1,1276,124,3,"key"],[1,1280,124,3],[1,1299,124,3,"value"],[1,1305,133,2],[1,1316,134,4],[1,1320,134,10,"stackIdx"],[1,1322,134,21,"this"],[1,1327,134,26,"_queueStack"],[1,1339,134,38,"length"],[1,1346,134,47],[1,1348,135,10,"queue"],[1,1350,135,18,"this"],[1,1355,135,23,"_queueStack"],[1,1367,135,35,"stackIdx"],[1,1370,136,4],[1,1377,137,6,"queue"],[1,1379,137,12,"popable"],[1,1388,138,29],[1,1392,138,6,"queue"],[1,1394,138,12,"tasks"],[1,1400,138,18,"length"],[1,1408,139,6,"this"],[1,1413,139,11,"_queueStack"],[1,1425,139,23,"length"],[1,1432,139,32],[1,1435,141,6,"this"],[1,1440,141,11,"_queueStack"],[1,1452,141,23,"pop"],[1,1458,147,13,"this"],[1,1463,147,18,"_getCurrentQueue"],[1,1483,149,13,"queue"],[1,1485,149,19,"tasks"],[1,1490,151,2],[1,1493,151,3],[1,1494,151,3,"key"],[1,1498,151,3],[1,1512,151,3,"value"],[1,1518,153,2],[1,1527,153,14,"task"],[1,1530,153,33],[1,1534,153,33,"_this2"],[1,1536,153,33,"this"],[1,1541,158,4,"this"],[1,1546,158,9,"_queueStack"],[1,1558,158,21,"push"],[1,1563,158,26],[1,1564,158,27,"tasks"],[1,1570,158,34],[1,1573,158,38,"popable"],[1,1582,158,47],[1,1586,159,4],[1,1590,159,10,"stackIdx"],[1,1592,159,21,"this"],[1,1597,159,26,"_queueStack"],[1,1609,159,38,"length"],[1,1616,159,47],[1,1618,160,10,"stackItem"],[1,1620,160,22,"this"],[1,1625,160,27,"_queueStack"],[1,1637,160,39,"stackIdx"],[1,1640,163,4,"task"],[1,1642,164,7,"gen"],[1,1648,165,7,"then"],[1,1653,165,12],[1,1664,171,8,"stackItem"],[1,1666,171,18,"popable"],[1,1675,171,28],[1,1677,172,8,"_this2"],[1,1679,172,13,"hasTasksToProcess"],[1,1700,172,36,"_this2"],[1,1702,172,41,"_onMoreTasks"],[1,1716,173,6],[1,1719,174,7,"catch"],[1,1725,174,13],[1,1734,174,13,"ex"],[1,1737,175,8,"setTimeout"],[1,1748,175,19],[1,1759,177,10],[1,1765,176,10,"ex"],[1,1767,176,13,"message"],[1,1775,176,23],[1,1821,176,69,"task"],[1,1823,176,74,"name"],[1,1832,176,83,"ex"],[1,1834,176,86,"message"],[1,1844,177,16,"ex"],[1,1845,178,8],[1,1847,178,11],[1,1849,179,6],[1,1851,180,2],[1,1855,180,3],[1,1857,43,15],[1,1859,183,25],[1,1862]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0","setTimeout$argument_0"],"mappings":"AAA;AC0C;ECQ;GDG;EEO;GFE;EGE;kBCC,0BD;GHC;EKE;WCG;kCCE,0CD;QDC;cGC,mDH;GLC;ESY;GTE;EUK;GV4B;EWS;GXkB;EYE;YCY;ODQ;aEC;mBCC;SDG;OFC;GZC;CDC"},"hasCjsExports":false},"type":"js/module"}]}